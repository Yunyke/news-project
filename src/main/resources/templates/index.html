<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head translate="no">
<meta charset="UTF-8">
<title th:text="${title}">Daily News</title>
<link
	href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
	rel="stylesheet">
<link
	href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@700&display=swap"
	rel="stylesheet">
<link rel="stylesheet" th:href="@{css/webstyle.css}">
<style>

/* 新聞區塊 */
.news-grid {
	display: grid;
	grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
	gap: 20px;
	align-items: start;
}

/* 卡片樣式 */
.news-card {
	background-color: #f7f7f7;
	box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
	border-radius: 8px;
	cursor: pointer;
	display: flex;
	flex-direction: row;
	padding: 10px;
	position: relative;
	transition: background-color 0.3s ease;
	margin: 10px;
	height: 135px;
}

.news-title {
	font-weight: 700;
	font-size: 1.2rem;
	margin: 0 0 8px 0;
	word-wrap: break-word;
	line-height: 1.2;
	overflow: visible;
	text-overflow: normal;
	white-space: normal;
	max-height: 2.4em;
	padding-right: 80px;
	padding-left: 5px;
}

.cnn-card .news-title {
	font-size: 0.95rem;
	line-height: 1.2;
	margin: 0;
	white-space: nowrap;
	overflow: hidden;
	text-overflow: ellipsis;
	padding-right: 60px;
}
</style>

</head>
<body>

	<div th:replace="~{fragments :: navbar}"></div>

	<script th:replace="~{fragments :: session-inline-script}"></script>

	<a href="#" class="btn btn-warning position-fixed bottom-0 end-0 m-4"
		style="z-index: 999;" onclick="handleViewCartClick()"> 📰 查看新聞清單 <span
		id="cart-count" class="badge bg-dark ms-1"></span>
	</a>
	<ul class="navbar-nav ms-auto">


		<form class="d-flex ms-auto align-items-center" th:action="@{/search}"
			method="get"></form>

	</ul>
	</div>
	</div>
	</nav>

	<div th:replace="fragments :: auth-section"></div>

	<!-- 新聞卡片區 -->
	<div class="grid-container">

		<div class="news-grid">

			<!-- CNN  -->
			<div class="news-section">
				<h2 class="news-section-title mb-3" translate="no">CNN</h2>

				<div th:each="news : ${cnnNewsList}"
					th:if="${news != null and news.title != null and news.title != ''}"
					class="news-card  ">

					<button class="btn btn-sm btn-outline-primary add-to-cart-btn"
						th:attr="data-id=${news.id}">➕</button>
					<a th:href="${news.url}" target="_blank">
						<div style="display: flex;">
							<img th:if="${news.imageUrl != null}" th:src="${news.imageUrl}"
								class="news-img" />
							<div class="news-content">
								<h5 class="news-title" th:text="${news.title}"></h5>
								<p class="hover-description" th:text="${news.description}"></p>
								<p class="news-time"
									th:text="${#temporals.format(news.publishedAt, 'yyyy-MM-dd HH:mm')}"></p>
							</div>
						</div>
					</a>

				</div>


			</div>


			<!-- BBC  -->
			<div class="news-section">
				<h2 class="news-section-title mb-3" translate="no">BBC</h2>
				<div th:each="news : ${bbcNewsList}" class="news-card">


					<button class="btn btn-sm btn-outline-primary add-to-cart-btn"
						th:attr="data-id=${news.id}">➕</button>


					<a th:href="${news.url}" target="_blank">
						<div style="display: flex">
							<img th:if="${news.imageUrl}" th:src="${news.imageUrl}"
								class="news-img" />

							<div class="news-content">
								<h5 class="news-title" th:text="${news.title}">標題</h5>

								<p class="hover-description" th:text="${news.description}">摘要</p>


								<p class="news-time"
									th:text="${#temporals.format(news.publishedAt,'yyyy-MM-dd HH:mm')}">
								</p>
							</div>
						</div>
					</a>
				</div>
			</div>

			<!-- NHK  -->
			<div class="news-section">
				<h2 class="news-section-title mb-3" translate="no">NHK</h2>
				<div th:each="news : ${nhkNewsList}"
					th:if="${news.title != null and news.title != ''}"
					class="news-card">


					<button class="btn btn-sm btn-outline-primary add-to-cart-btn"
						th:attr="data-id=${news.id}">➕</button>


					<a th:href="${news.url}" target="_blank"
						style="text-decoration: none; color: inherit;">
						<div style="display: flex; align-items: center;">
							<img th:if="${news.imageUrl != null}" th:src="${news.imageUrl}"
								class="news-img" alt="新聞圖片" onerror="this.style.display='none'" />
							<div class="news-content">
								<h5 class="news-title" th:text="${news.title}">標題</h5>
								<div class="hover-description" th:text="${news.description}">內容</div>


								<p class="text-muted news-time"
									th:text="${#temporals.format(news.publishedAt, 'yyyy-MM-dd HH:mm')}">日期</p>
							</div>
						</div>
					</a>
				</div>
			</div>



		</div>
	</div>

	</div>

	<script th:src="@{/js/member.js}"></script>

</body>
</html>